---
name: Popovers**
route: /components/popover
components: APopover
---

# Popovers

## Install

Integrate with your build to [auto-import](/#integrating), or add an import in your component:

```
import {APopover} from "@cisco-sbg-ui/magna-react";
```

It is necessary for `APopover` to be a descendant of `AApp` for mounting.

## Usage

<Playground
  fullWidthPreview
  code={`() => {
  const [language, setLanguage] = useState({text: "English (US)"});
  const [timeZone, setTimeZone] = useState({
    text: "Eastern Standard Time"
  });
  const buttonRef = useRef(null);
  const [open, setOpen] = useState(false);
  return (
    <>
      <AButton
        icon
        tertiaryAlt
        ref={buttonRef}
        onClick={() => setOpen(!open)}
        aria-haspopup="true">
        <AIcon>time-zone</AIcon>
      </AButton>
      <APopover
        anchorRef={buttonRef}
        open={open}
        placement="right-top"
        onClose={() => setOpen(false)}>
        <APanelHeader>
          <APanelTitle>Localization Settings</APanelTitle>
          <AButton onClick={() => setOpen(false)} tertiaryAlt icon>
            <AIcon>close</AIcon>
          </AButton>
        </APanelHeader>
        <APanelBody>
          <AContainer>
            <ARow>
              <ACol>
                <ASelect
                  label="Language"
                  items={[
                    {text: "English (US)", selected: true},
                    {text: "Japanese"}
                  ]}
                  itemText="text"
                  itemValue="text"
                  onSelected={(item) => setLanguage(item)}
                />
              </ACol>
              <ACol>
                <ASelect
                  label="Time Zone"
                  items={[
                    {text: "Eastern Standard Time", selected: true},
                    {text: "Japan Standard Time"}
                  ]}
                  itemText="text"
                  itemValue="text"
                  onSelected={(item) => setTimeZone(item)}
                />
              </ACol>
            </ARow>
          </AContainer>
        </APanelBody>
        <APanelFooter>
          <AButton tertiary className="mr-4" onClick={() => setOpen(false)}>
            Cancel
          </AButton>
          <AButton primary onClick={() => setOpen(false)}>
            Save Changes
          </AButton>
        </APanelFooter>
      </APopover>
    </>
  );
}
`}
/>

## Popover Props

The `APopover` component inherits passed props.

<Props of="APopover" />

## Position

<Playground
  fullWidthPreview
  code={`() => {
  const buttonRef1 = useRef(null);
  const buttonRef2 = useRef(null);
  const buttonRef3 = useRef(null);
  const buttonRef4 = useRef(null);
  const buttonRef5 = useRef(null);
  const buttonRef6 = useRef(null);
  const buttonRef7 = useRef(null);
  const buttonRef8 = useRef(null);
  const buttonRef9 = useRef(null);
  const buttonRef10 = useRef(null);
  const buttonRef11 = useRef(null);
  const buttonRef12 = useRef(null);
  const [open, setOpen] = useState(false);
  const [placement, setPlacement] = useState("top-left");
  const [anchorRef, setAnchorRef] = useState(buttonRef12);
  return (
    <AContainer className="pa-6">
      <ARow>
        <ACol cols="2" />
        <ACol className="text-right">
          <AButton
            ref={buttonRef8}
            onClick={() => {
              setPlacement("bottom-left");
              setAnchorRef(buttonRef8);
              setOpen(!open);
            }}
            aria-haspopup="true">
            Bottom-Left
          </AButton>
        </ACol>
        <ACol className="text-center">
          <AButton
            ref={buttonRef7}
            onClick={() => {
              setPlacement("bottom");
              setAnchorRef(buttonRef7);
              setOpen(!open);
            }}
            aria-haspopup="true">
            Bottom
          </AButton>
        </ACol>
        <ACol>
          <AButton
            ref={buttonRef6}
            onClick={() => {
              setPlacement("bottom-right");
              setAnchorRef(buttonRef6);
              setOpen(!open);
            }}
            aria-haspopup="true">
            Bottom-Right
          </AButton>
        </ACol>
        <ACol cols="2" />
      </ARow>
      <ARow>
        <ACol>
          <AButton
            ref={buttonRef3}
            onClick={() => {
              setPlacement("right-top");
              setAnchorRef(buttonRef3);
              setOpen(!open);
            }}
            aria-haspopup="true">
            Right-Top
          </AButton>
        </ACol>
        <ACol cols="6" />
        <ACol className="text-right">
          <AButton
            ref={buttonRef11}
            onClick={() => {
              setPlacement("left-top");
              setAnchorRef(buttonRef11);
              setOpen(!open);
            }}
            aria-haspopup="true">
            Left-Top
          </AButton>
        </ACol>
      </ARow>
      <ARow>
        <ACol>
          <AButton
            ref={buttonRef4}
            onClick={() => {
              setPlacement("right");
              setAnchorRef(buttonRef4);
              setOpen(!open);
            }}
            aria-haspopup="true">
            Right
          </AButton>
        </ACol>
        <ACol cols="6" />
        <ACol className="text-right">
          <AButton
            ref={buttonRef10}
            onClick={() => {
              setPlacement("left");
              setAnchorRef(buttonRef10);
              setOpen(!open);
            }}
            aria-haspopup="true">
            Left
          </AButton>
        </ACol>
      </ARow>
      <ARow>
        <ACol>
          <AButton
            ref={buttonRef5}
            onClick={() => {
              setPlacement("right-bottom");
              setAnchorRef(buttonRef5);
              setOpen(!open);
            }}
            aria-haspopup="true">
            Right-Bottom
          </AButton>
        </ACol>
        <ACol cols="6" />
        <ACol className="text-right">
          <AButton
            ref={buttonRef9}
            onClick={() => {
              setPlacement("left-bottom");
              setAnchorRef(buttonRef9);
              setOpen(!open);
            }}
            aria-haspopup="true">
            Left-Bottom
          </AButton>
        </ACol>
      </ARow>
      <ARow>
        <ACol cols="2" />
        <ACol className="text-right">
          <AButton
            ref={buttonRef12}
            onClick={() => {
              setPlacement("top-left");
              setAnchorRef(buttonRef12);
              setOpen(!open);
            }}
            aria-haspopup="true">
            Top-Left
          </AButton>
        </ACol>
        <ACol className="text-center">
          <AButton
            ref={buttonRef1}
            onClick={() => {
              setPlacement("top");
              setAnchorRef(buttonRef1);
              setOpen(!open);
            }}
            aria-haspopup="true">
            Top
          </AButton>
        </ACol>
        <ACol>
          <AButton
            ref={buttonRef2}
            onClick={() => {
              setPlacement("top-right");
              setAnchorRef(buttonRef2);
              setOpen(!open);
            }}
            aria-haspopup="true">
            Top-Right
          </AButton>
        </ACol>
        <ACol cols="2" />
      </ARow>
      <APopover anchorRef={anchorRef} open={open} placement={placement}>
        <APanelHeader>
          <APanelTitle>Confirmation</APanelTitle>
          <AButton onClick={() => setOpen(false)} tertiaryAlt icon>
            <AIcon>close</AIcon>
          </AButton>
        </APanelHeader>
        <APanelBody>
          <p>Are you sure you want to continue with your action?</p>
          Popover Body. Lorem ipsum dolor sit amet, consectetur adipisicing elit,
          sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
          enim ad veniam.
        </APanelBody>
        <APanelFooter>
          <AButton tertiary className="mr-4" onClick={() => setOpen(false)}>
            Cancel
          </AButton>
          <AButton primary onClick={() => setOpen(false)}>
            Apply
          </AButton>
        </APanelFooter>
      </APopover>
    </AContainer>
  );
}
`}
/>

## `onClose` Handling

<Playground
  fullWidthPreview
  code={`() => {
  const buttonRef = useRef(null);
  const [open, setOpen] = useState(false);
  return (
    <AContainer fluid>
      <ARow>
        <ACol className="text-center">
          <AButton
            ref={buttonRef}
            onClick={() => setOpen(!open)}
            aria-haspopup="true">
            Bottom
          </AButton>
          <p className="onclose-1__instruction">
            Clicking outside of the anchor or popover will close the popover
            in this example.
          </p>
          <APopover
            anchorRef={buttonRef}
            open={open}
            placement="bottom"
            onClose={() => setOpen(false)}>
            <APanelHeader>
              <APanelTitle>Confirmation</APanelTitle>
              <AButton onClick={() => setOpen(false)} tertiaryAlt icon>
                <AIcon>close</AIcon>
              </AButton>
            </APanelHeader>
            <APanelBody>
              <p>Are you sure you want to continue with your action?</p>
              Popover Body. Lorem ipsum dolor sit amet, consectetur adipisicing
              elit, sed do eiusmod tempor incididunt ut labore et dolore magna
              aliqua. Ut enim ad veniam.
            </APanelBody>
            <APanelFooter>
              <AButton
                tertiary
                className="mr-4"
                onClick={() => setOpen(false)}>
                Cancel
              </AButton>
              <AButton primary onClick={() => setOpen(false)}>
                Apply
              </AButton>
            </APanelFooter>
          </APopover>
        </ACol>
      </ARow>
    </AContainer>
  );
}
`}
/>

## Accessibility Notes

By default, `APopover` components are assigned the [WAI-ARIA](https://www.w3.org/WAI/standards-guidelines/aria/) role of [menu](https://www.w3.org/TR/wai-aria/#menu).

`APopover` components are mounted outside of the application area to avoid issues with overflow and position.
Accordingly, `APopover` attempts to manage the user's focus by defaulting to focus the menu on open.
This behavior can be disabled by setting the `focusOnOpen` prop to false.
On close, the menu will return focus to the anchor element.

`keydown` event for the `esc` key calls the `onClose` handler. Additionally, for the `tab`
key the menu will request to be closed and set focus to the opener, which allows native `tab`
key functionality to focus the next tab-focusable item.

Remember to indicate that your anchor element has a menu via the `aria-haspopup` attribute. In addition, your anchor element should have a `tabindex` if it does not already.
